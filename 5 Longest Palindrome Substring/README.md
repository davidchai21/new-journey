This questino can be solved by DP, but there is a Manacher's algorithm that can do linear time.

RUntime: 320ms
